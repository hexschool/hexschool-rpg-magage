{"version":3,"sources":["webpack:///./src/views/Users/UserDetail.vue","webpack:///./src/components/Users/UserDetail/DangerActionsModal.vue","webpack:///./src/components/Users/UserDetail/DangerActionsModal.vue?d42b","webpack:///./src/components/Users/UserDetail/OrderList.vue","webpack:///./src/components/Users/UserDetail/OrderList.vue?d86b","webpack:///./src/components/Users/UserDetail/UserLog.vue","webpack:///./src/components/Users/UserDetail/UserLog.vue?fac5","webpack:///./src/components/Users/UserDetail/RoleAndPermissions.vue","webpack:///./src/components/Users/UserDetail/RoleAndPermissions.vue?52c4","webpack:///./src/views/Users/UserDetail.vue?d4c6","webpack:///./src/views/Users/UserDetail.vue?aee5"],"names":["class","style","id","role","aria-orientation","data-bs-toggle","data-bs-target","type","aria-controls","aria-selected","aria-labelledby","for","active","isLoading","is-full-page","fullPage","z-index","to","userInfo","avatar","src","alt","nickname","name","secondary_email","thirdparty","length","tempData","password","updateUerInfo","user_id","OpenAlertModal","OpenDangerModal","alertModalType","alertModalUserName","comfirmAlertModal","dangerActionsType","dangerActionsName","dangerUserMethod","hasFooter","title","ModalType","classList","body","UserName","deleteName","placeholder","deactivatedName","footer","disabled","$emit","components","Modal","props","String","setup","document","getElementById","addEventListener","value","render","remarkText","PostAmdinRemark","remarkBtnDisabled","remarkOverlay","getUserRemark","tempID","remarkLoading","remarks","msg","index","key","Date","create_time","toLocaleString","content","adminLogOverlay","getUserAdminLog","adminLogLoading","adminLog","userLogOverlay","getUserLog","userLogLoading","log","route","proxy","data","axios","get","then","response","user_logs","admin_logs","params","post","remark","message","roleList","userHasRole","cht_name","update","btnDisabled","rangeList","range","checked","sub_ranges","every","ele","userHasRanges","includes","CheckAllRoles","sub","Loading","mixinPostMsg","postToasts","getRoleAndPermissions","roles","ranges","getUserPermissions","forEach","push","role_id","rangeItem","catch","error","e","tempRange","filter","target","some","concat","url","updateData","put","AlertModal","DangerActionsModal","UserLog","RoleAndPermissions","OrderList","router","getUserInfo","user_info","alertModal","alertModalUserID","show","dangerActionsModal","sendPasswordMail","hide","val","userId","config","method","setTimeout"],"mappings":"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","file":"js/chunk-1f339db2.cffad2e8.js","sourcesContent":["<template>\n  <div class=\"about px-4 mt-4\">\n    <loading :active=\"isLoading\" :is-full-page=\"fullPage\" :z-index=\"1021\"></loading>\n    <router-link to=\"/admin/users\">\n      <p><span class=\"material-icons align-bottom\">arrow_back</span>返回</p>\n    </router-link>\n    <div class=\"row position-relative align-items-start\">\n      <div class=\"col-md-4 users-sticky-md-top\" style=\"top: 80px;\">\n        <div class=\"card shadow-sm rounded-4 overflow-hidden mb-4\">\n          <div class=\"card-header bg-white py-3\">\n            <img v-if=\"userInfo.avatar\" :src=\"userInfo.avatar\" alt=\"頭像\">\n            <div v-else style=\"width: 60px; height: 60px;\"\n              class=\"rounded-circle mx-auto bg-light mb-1\"></div>\n            <p class=\"text-center mb-0\">{{ userInfo.nickname }}</p>\n          </div>\n          <div class=\"card-body display-12 fw-normal\">\n            <ul class=\"list-unstyled list-unstyled-py-3 mb-0\">\n              <li class=\"mb-1\" v-if=\"userInfo.name\">\n                <span class=\"material-icons align-middle fs-6\">\n                  person\n                </span>\n                {{ userInfo.name }}\n              </li>\n              <li class=\"mb-1\" v-if=\"userInfo.secondary_email\">\n                <span class=\"material-icons align-middle fs-6\">\n                  mail\n                </span>\n                {{ userInfo.secondary_email }}\n              </li>\n              <li class=\"mb-1 border-top pt-3\"\n                v-if=\"userInfo.thirdparty && userInfo.thirdparty.length > 0\">\n                <span class=\"material-icons align-middle fs-6\">\n                settings_ethernet\n                </span>\n                已綁定 Github 帳號\n              </li>\n            </ul>\n          </div>\n        </div>\n        <div class=\"nav flex-column nav-pills shadow-sm rounded-4 border overflow-hidden\"\n          id=\"v-pills-tab\" role=\"tablist\" aria-orientation=\"vertical\">\n          <button class=\"nav-link active border-bottom rounded-0\" id=\"v-pills-home-tab\"\n            data-bs-toggle=\"pill\" data-bs-target=\"#v-pills-home\"\n            type=\"button\" role=\"tab\" aria-controls=\"v-pills-home\" aria-selected=\"true\">個人資料</button>\n          <button class=\"nav-link border-bottom rounded-0\" id=\"v-pills-profile-tab\"\n            data-bs-toggle=\"pill\" data-bs-target=\"#v-pills-profile\"\n            type=\"button\" role=\"tab\"\n            aria-controls=\"v-pills-profile\" aria-selected=\"false\">權限管理</button>\n          <button class=\"nav-link border-bottom rounded-0\" id=\"v-pills-messages-tab\"\n            data-bs-toggle=\"pill\" data-bs-target=\"#v-pills-messages\"\n            type=\"button\" role=\"tab\"\n            aria-controls=\"v-pills-messages\" aria-selected=\"false\">訂單資訊</button>\n          <button class=\"nav-link border-bottom rounded-0\" id=\"v-pills-settings-tab\"\n            data-bs-toggle=\"pill\" data-bs-target=\"#v-pills-settings\"\n            type=\"button\" role=\"tab\"\n            aria-controls=\"v-pills-settings\" aria-selected=\"false\">危險操作</button>\n        </div>\n      </div>\n      <div class=\"col-md-8\">\n        <div class=\"tab-content\" id=\"v-pills-tabContent\">\n          <div class=\"tab-pane fade show active\" id=\"v-pills-home\"\n            role=\"tabpanel\" aria-labelledby=\"v-pills-home-tab\">\n            <div class=\"card shadow-sm rounded-4 overflow-hidden mb-4\">\n              <div class=\"card-header bg-white py-3\">\n                <p class=\"mb-0\">\n                  <span class=\"material-icons align-bottom\">\n                  settings_accessibility\n                  </span> 個人資訊\n                </p>\n              </div>\n              <div class=\"card-body\">\n                  <div class=\"mb-3\">\n                    <label for=\"nickname\" class=\"form-label\">暱稱</label>\n                    <input type=\"text\" class=\"form-control\" id=\"nickname\"\n                    v-model=\"tempData.nickname\">\n                  </div>\n                   <div class=\"mb-3\">\n                    <label for=\"name\" class=\"form-label\">使用者姓名</label>\n                    <input type=\"text\" class=\"form-control\" id=\"name\" v-model=\"tempData.name\">\n                  </div>\n                  <div class=\"mb-3\">\n                    <label for=\"password\" class=\"form-label\">重設密碼</label>\n                    <input type=\"password\" class=\"form-control\"\n                    id=\"password\" v-model=\"tempData.password\">\n                    <small class=\"text-muted\">最短 8 字元，且必須含有英文大小寫與數字混合</small>\n                  </div>\n                <button class=\"btn btn-secondary\"\n                  @click=\"updateUerInfo(userInfo.user_id)\">儲存</button>\n                <hr>\n                <button class=\"btn btn-sm btn-outline-secondary\"\n                  @click=\"OpenAlertModal('resetPassword', userInfo.nickname,\n                   userInfo.user_id)\">發重設密碼信</button>\n              </div>\n            </div>\n            <UserLog :id=\"userInfo.user_id\"></UserLog>\n          </div>\n          <!-- 權限管理 content -->\n          <div class=\"tab-pane fade\" id=\"v-pills-profile\"\n            role=\"tabpanel\" aria-labelledby=\"v-pills-profile-tab\">\n            <RoleAndPermissions></RoleAndPermissions>\n          </div>\n          <!--- 付款紀錄 -->\n          <div class=\"tab-pane fade\" id=\"v-pills-messages\"\n            role=\"tabpanel\" aria-labelledby=\"v-pills-messages-tab\">\n            <OrderList></OrderList>\n          </div>\n          <!-- 危險操作 -->\n          <div class=\"tab-pane fade\" id=\"v-pills-settings\"\n            role=\"tabpanel\" aria-labelledby=\"v-pills-settings-tab\">\n            <div class=\"card border-danger shadow-sm rounded-4 overflow-hidden mb-4\">\n              <div class=\"card-header bg-white py-3 border-danger\">\n                <p class=\"mb-0 text-danger\">\n                  <span class=\"material-icons align-bottom\">\n                    warning\n                  </span> 危險操作 </p>\n              </div>\n               <div class=\"card-body\">\n                <div class=\"d-flex\">\n                  <div class=\"flex-fill text-muted\">\n                    <h5>暫停用戶</h5>\n                    <p class=\"mb-0\">一定要這樣做嗎？他會不能再次登入哦！</p>\n                  </div>\n                  <button class=\"btn btn-danger px-4\"\n                    @click=\"OpenDangerModal('deactivated', userInfo.nickname)\">停權</button>\n                </div>\n                <hr>\n                 <div class=\"d-flex\">\n                  <div class=\"flex-fill text-muted\">\n                    <h5>刪除用戶</h5>\n                    <p class=\"mb-0\">他只是輸入錯 Email 吧？</p>\n                  </div>\n                  <button class=\"btn btn-outline-danger px-4\"\n                    @click=\"OpenDangerModal('deleteAccount', userInfo.nickname)\">刪除用戶</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <AlertModal :type=\"alertModalType\" :name=\"alertModalUserName\"\n    @comfirm=\"comfirmAlertModal\"></AlertModal>\n    <DangerActionsModal\n      :type=\"dangerActionsType\" :name=\"dangerActionsName\"\n      @danger-user-method=\"dangerUserMethod\"></DangerActionsModal>\n  </div>\n</template>\n\n<script>\nimport { useRoute, useRouter } from 'vue-router';\nimport {\n  ref, toRefs, reactive, onMounted, getCurrentInstance,\n} from 'vue';\nimport { Modal } from 'bootstrap';\nimport AlertModal from '@/components/Users/Users/AlertModal.vue';\nimport DangerActionsModal from '@/components/Users/UserDetail/DangerActionsModal.vue';\nimport OrderList from '@/components/Users/UserDetail/OrderList.vue';\nimport UserLog from '@/components/Users/UserDetail/UserLog.vue';\nimport RoleAndPermissions from '@/components/Users/UserDetail/RoleAndPermissions.vue';\nimport Loading from 'vue3-loading-overlay';\nimport 'vue3-loading-overlay/dist/vue3-loading-overlay.css';\nimport mixinPostMsg from '../../service/mixinPostMsg';\n\nexport default {\n  name: 'UserDetail',\n  components: {\n    Loading,\n    AlertModal,\n    DangerActionsModal,\n    UserLog,\n    RoleAndPermissions,\n    OrderList,\n  },\n  setup() {\n    const { proxy } = getCurrentInstance();\n    const route = useRoute();\n    const router = useRouter();\n    const { postToasts } = mixinPostMsg(); // 發送訊息\n\n    // Loading\n    const isLoading = ref(false);\n    const fullPage = ref(false);\n\n    // Get User Data\n    const data = reactive({\n      userInfo: {},\n      tempData: {},\n    });\n    function getUserInfo(id) {\n      proxy.axios\n        .get(`/v1/user/${id}/info`)\n        .then((response) => {\n          data.userInfo = response.data.user_info;\n\n          if (data.userInfo.name && data.userInfo.name !== '') {\n            data.tempData.name = data.userInfo.name;\n          }\n          data.tempData.nickname = data.userInfo.nickname;\n          isLoading.value = false;\n        });\n    }\n\n    // AlertModal\n    const alertModal = ref('');\n    onMounted(() => {\n      const { id } = route.params;\n      getUserInfo(id);\n      isLoading.value = true;\n      alertModal.value = new Modal(document.getElementById('alertModal'));\n    });\n    const alertModalType = ref('');\n    const alertModalUserName = ref('');\n    const alertModalUserID = ref('');\n    function OpenAlertModal(type, name, id) {\n      alertModal.value.show();\n      alertModalType.value = type;\n      alertModalUserName.value = name;\n      alertModalUserID.value = id;\n    }\n    // DangerModal\n    const dangerActionsModal = ref('');\n    onMounted(() => {\n      dangerActionsModal.value = new Modal(document.getElementById('userDangerActions'));\n    });\n    const dangerActionsType = ref('');\n    const dangerActionsName = ref('');\n    function OpenDangerModal(type, name) {\n      dangerActionsModal.value.show();\n      dangerActionsType.value = type;\n      dangerActionsName.value = name;\n    }\n    // 重設密碼\n    function sendPasswordMail() {\n      proxy.axios\n        .post(`/v1/user/${alertModalUserID.value}/reset_password`)\n        .then((response) => {\n          if (response.data.message === '成功') {\n            alertModal.value.hide();\n            postToasts('success', '已寄出重設密碼信件', `${alertModalUserName.value} 的重設密碼信件已經成功寄出。`);\n          } else {\n            alertModal.value.hide();\n            postToasts('danger', '重設密碼信件寄出失敗', response.data.message);\n          }\n        }).catch((error) => {\n          alertModal.value.hide();\n          postToasts('danger', '重設密碼信件寄出失敗', error);\n        });\n    }\n    function comfirmAlertModal(value) {\n      // resetPassword: 重發驗證信 | deactivated: 停用帳號\n      if (value === 'resetPassword') {\n        sendPasswordMail();\n      }\n    }\n    // 更新使用者訊息\n    function updateUerInfo(id) {\n      isLoading.value = true;\n      if (data.userInfo.password && data.userInfo.password !== '') {\n        data.tempData.password = data.userInfo.password;\n      }\n      proxy.axios\n        .put(`/v1/user/${id}/info`, data.tempData)\n        .then((response) => {\n          data.userInfo = {};\n          if (response.data.message === '成功') {\n            getUserInfo(id);\n          }\n          isLoading.value = false;\n        });\n    }\n    function dangerUserMethod(val) {\n      // type: delete 刪除\n      // type: deactivated 停用\n      const userId = data.userInfo.user_id;\n      const config = {\n        method: '',\n        url: '',\n      };\n      if (val.type === 'delete') {\n        config.method = 'delete';\n        config.url = `/v1/user/${userId}`;\n      } else if (val.type === 'deactivated') {\n        config.method = 'put';\n        config.url = `/v1/user/${userId}/suspend`;\n      }\n      proxy.axios[config.method](config.url)\n        .then((response) => {\n          if (response.data.message === '成功') {\n            dangerActionsModal.value.hide();\n            postToasts('success', '危險操作成功，3 秒後跳回使用者列表', `用戶已經被 ${val.type} 了。`);\n          } else {\n            dangerActionsModal.value.hide();\n            postToasts('danger', '危險操作失敗，3 秒後跳回使用者列表', response.data.message);\n          }\n          setTimeout(() => {\n            router.push('/admin/users');\n          }, 3000);\n        }).catch((error) => {\n          dangerActionsModal.value.hide();\n          postToasts('danger', '危險操作失敗，3 秒後跳回使用者列表', error);\n        });\n    }\n    return {\n      isLoading,\n      fullPage,\n      ...toRefs(data),\n      getUserInfo,\n      OpenAlertModal,\n      alertModalType,\n      alertModalUserName,\n      dangerActionsType,\n      dangerActionsName,\n      OpenDangerModal,\n      comfirmAlertModal,\n      updateUerInfo,\n      dangerUserMethod,\n    };\n  },\n};\n</script>\n\n<style scope lang=\"scss\">\n@media (min-width: 768px) {\n  .users-sticky-md-top {\n    top: 80px;\n    position: sticky;\n    z-index: 1020;\n  }\n}\n</style>\n","<template>\n  <Modal id=\"userDangerActions\" :hasFooter=\"true\"\n  :title=\"ModalType == 'deactivated' ?'停用帳戶' : '刪除帳戶'\"\n  :classList=\"'bg-danger text-white'\">\n  <template v-slot:body>\n    <template v-if=\"ModalType == 'deleteAccount'\">\n      <!-- 刪除帳戶 -->\n      <p>確定刪除 <b> {{ UserName }} </b> 這個用戶嗎？</p>\n      <div class=\"my-2\">\n        <input type=\"text\" class=\"form-control\" id=\"deactivated\"\n          v-model=\"deleteName\" placeholder=\"請輸入使用者暱稱（上面粗體文字）\">\n      </div>\n    </template>\n    <template v-if=\"ModalType == 'deactivated'\">\n      <!-- 停用帳戶 -->\n      <p>確認要停用 <b> {{ UserName }} </b> 這個用戶嗎？</p>\n      <div class=\"my-2\">\n        <input type=\"text\" class=\"form-control\" id=\"deactivated\"\n          v-model=\"deactivatedName\" placeholder=\"請輸入使用者暱稱（上面粗體文字）\">\n      </div>\n    </template>\n  </template>\n  <template v-slot:footer>\n    <template v-if=\"ModalType == 'deactivated'\">\n      <button :disabled=\"deactivatedName !== UserName\"\n        type=\"button\" class=\"btn btn-danger\" @click=\"this.$emit('danger-user-method', {\n          type: 'deactivated'\n        })\">停用帳戶</button>\n    </template>\n        <template v-if=\"ModalType == 'deleteAccount'\">\n      <button type=\"button\" :disabled=\"deleteName !== UserName\"\n        class=\"btn btn-danger\" @click=\"this.$emit('danger-user-method', {\n          type: 'delete'\n        })\">刪除帳戶</button>\n    </template>\n  </template>\n  </Modal>\n</template>\n\n<script>\nimport { ref, computed, onMounted } from 'vue';\nimport Modal from '@/components/Modal.vue';\n\nexport default {\n  name: 'AlertModal',\n  components: {\n    Modal,\n  },\n  props: {\n    name: String, // User 暱稱\n    type: String, // deleteAccount: 刪除帳戶 | deactivated: 停用帳號\n  },\n  setup(props) {\n    const deactivatedName = ref('');\n    const deleteName = ref('');\n    const ModalType = computed(() => props.type);\n    const UserName = computed(() => props.name);\n    onMounted(() => {\n      document.getElementById('userDangerActions')\n        .addEventListener('hidden.bs.modal', () => {\n          deactivatedName.value = '';\n          deleteName.value = '';\n        });\n    });\n    return {\n      deactivatedName,\n      deleteName,\n      ModalType,\n      UserName,\n    };\n  },\n};\n</script>\n","import { render } from \"./DangerActionsModal.vue?vue&type=template&id=c9d44a20\"\nimport script from \"./DangerActionsModal.vue?vue&type=script&lang=js\"\nexport * from \"./DangerActionsModal.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"card shadow-sm rounded-4 overflow-hidden mb-4\">\n    <div class=\"card-header bg-white py-3\">\n      <p class=\"mb-0\">\n        <span class=\"material-icons align-bottom\"> savings </span> 付款紀錄\n      </p>\n    </div>\n    <div class=\"card-body p-0\">\n      <div class=\"bg-light p-3\">\n        <table class=\"table\">\n          <tbody>\n            <tr>\n              <th scope=\"row\">用戶名稱</th>\n              <td>卡斯伯</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">Email</th>\n              <td>casper@hexschool.com</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">付款總金額</th>\n              <td>$12,300</td>\n            </tr>\n            <tr>\n              <th scope=\"row\">ID</th>\n              <td>-Mks3o3985mjn3</td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n      <div class=\"p-3 table-responsive\">\n        <table class=\"table\">\n          <thead>\n            <tr>\n              <th scope=\"col\">建立時間</th>\n              <th scope=\"col\">付款時間</th>\n              <th scope=\"col\">總金額</th>\n              <th scope=\"col\">主要品項</th>\n              <th scope=\"col\">查看細節</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <th scope=\"row\">2020-12-15</th>\n              <td>尚未付款</td>\n              <td>5880</td>\n              <td>六角學院商品</td>\n              <td>\n                <button class=\"btn btn-sm btn-outline-primary\">訂單細節</button>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'OrderList',\n};\n</script>\n","import { render } from \"./OrderList.vue?vue&type=template&id=c053c230\"\nimport script from \"./OrderList.vue?vue&type=script&lang=js\"\nexport * from \"./OrderList.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n <div class=\"card shadow-sm rounded-4 overflow-hidden mb-4\">\n    <div class=\"card-header bg-white py-3\">\n      <p class=\"mb-0\">\n        <span class=\"material-icons align-bottom\">\n        sentiment_very_satisfied\n        </span> 管理者訊息</p>\n    </div>\n      <div class=\"card-body\">\n        <div class=\"d-flex align-items-end\">\n          <div class=\"flex-fill me-2\">\n            <label for=\"admin_remark\" class=\"form-label\">抱怨訊息</label>\n            <input type=\"text\" class=\"form-control\"\n              id=\"admin_remark\" v-model=\"remarkText\">\n          </div>\n          <button class=\"btn btn-secondary ms-auto\"\n          @click=\"PostAmdinRemark()\"\n          :disabled=\"remarkBtnDisabled\">送出訊息</button>\n        </div>\n        <hr>\n        <p class=\"mb-1\">註記紀錄</p>\n        <div class=\"bg-light p-3 display-12 fw-normal mb-3\n        overflow-y-auto position-relative\" style=\"max-height: 200px; height: 150px\">\n        <div v-if=\"remarkOverlay\"\n        class=\"overlay position-absolute d-flex align-items-center justify-content-center\"\n          style=\"top: 0; bottom: 0; left: 0; right: 0;\">\n          <button class=\"btn btn-primary\" @click=\"getUserRemark(tempID);\">載入訊息\n            <div v-if=\"remarkLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </button>\n        </div>\n          <p class=\"mb-1\"\n            v-for=\"(msg, index) in remarks\"\n            :key=\"'admin_msg' + index\">\n            [ {{ new Date(msg.create_time).toLocaleString() }} ] {{ msg.content }}\n          </p>\n        </div>\n    </div>\n  </div>\n  <div class=\"card shadow-sm rounded-4 overflow-hidden mb-4\">\n    <div class=\"card-header bg-white py-3\">\n      <p class=\"mb-0\">\n        <span class=\"material-icons align-bottom\">\n        announcement\n        </span> 管理者操作</p>\n    </div>\n      <div class=\"card-body\">\n        <div class=\"bg-light p-3 display-12 fw-normal mb-3\n        overflow-y-auto position-relative\" style=\"max-height: 200px; height: 150px;\">\n        <div v-if=\"adminLogOverlay\"\n        class=\"overlay position-absolute d-flex align-items-center justify-content-center\"\n          style=\"top: 0; bottom: 0; left: 0; right: 0;\">\n          <button class=\"btn btn-primary\" @click=\"getUserAdminLog(tempID);\">載入訊息\n            <div v-if=\"adminLogLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </button>\n        </div>\n          <p class=\"mb-1\"\n            v-for=\"(msg, index) in adminLog\"\n            :key=\"'user_msg' + index\">\n            [ {{ new Date(msg.create_time).toLocaleString() }} ] {{ msg.content }}\n          </p>\n        </div>\n    </div>\n  </div>\n  <div class=\"card shadow-sm rounded-4 overflow-hidden mb-4\">\n    <div class=\"card-header bg-white py-3\">\n      <p class=\"mb-0\">\n        <span class=\"material-icons align-bottom\">\n        announcement\n        </span> 系統操作紀錄</p>\n    </div>\n      <div class=\"card-body\">\n        <div class=\"bg-light p-3 display-12 fw-normal mb-3\n        overflow-y-auto position-relative\" style=\"max-height: 200px; height: 150px\">\n        <div v-if=\"userLogOverlay\"\n        class=\"overlay position-absolute d-flex align-items-center justify-content-center\"\n          style=\"top: 0; bottom: 0; left: 0; right: 0;\">\n          <button class=\"btn btn-primary\" @click=\"getUserLog(tempID);\">載入訊息\n            <div v-if=\"userLogLoading\" class=\"spinner-border spinner-border-sm\" role=\"status\">\n              <span class=\"visually-hidden\">Loading...</span>\n            </div>\n          </button>\n        </div>\n          <p class=\"mb-1\"\n            v-for=\"(msg, index) in log\"\n            :key=\"'user_msg' + index\">\n            [ {{ new Date(msg.create_time).toLocaleString() }} ] {{ msg.content }}\n          </p>\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  ref, reactive, toRefs, onMounted, getCurrentInstance,\n} from 'vue';\nimport { useRoute } from 'vue-router';\n\nexport default {\n  name: 'UserLog',\n  setup() {\n    const route = useRoute();\n    const { proxy } = getCurrentInstance();\n    const tempID = ref('');\n    // 管理者新增訊息\n    const remarkText = ref('');\n    const remarkBtnDisabled = ref(false);\n    const data = reactive({\n      log: [],\n      adminLog: [],\n      remarks: [],\n    });\n    const userLogOverlay = ref(true);\n    const userLogLoading = ref(false);\n    function getUserLog(id) {\n      userLogLoading.value = true;\n      proxy.axios\n        .get(`/v1/user/${id}/log`)\n        .then((response) => {\n          data.log = response.data.user_logs;\n          remarkBtnDisabled.value = false;\n          userLogOverlay.value = false;\n          userLogLoading.value = false;\n        });\n    }\n    const adminLogOverlay = ref(true);\n    const adminLogLoading = ref(false);\n    function getUserAdminLog(id) {\n      adminLogLoading.value = true;\n      proxy.axios\n        .get(`/v1/user/${id}/admin_log`)\n        .then((response) => {\n          data.adminLog = response.data.admin_logs;\n          remarkBtnDisabled.value = false;\n          adminLogOverlay.value = false;\n          adminLogLoading.value = false;\n        });\n    }\n    const remarkOverlay = ref(true);\n    const remarkLoading = ref(false);\n    function getUserRemark(id) {\n      remarkLoading.value = true;\n      proxy.axios\n        .get(`/v1/user/${id}/remark`)\n        .then((response) => {\n          data.remarks = response.data.remarks;\n          remarkBtnDisabled.value = false;\n          remarkOverlay.value = false;\n          remarkLoading.value = false;\n        });\n    }\n    function PostAmdinRemark() {\n      const { id } = route.params;\n      remarkBtnDisabled.value = true;\n      proxy.axios\n        .post(`/v1/user/${id}/remark`, {\n          remark: remarkText.value,\n        })\n        .then((response) => {\n          remarkText.value = '';\n          if (response.data.message === '成功') {\n            getUserRemark(id);\n          }\n        });\n    }\n\n    onMounted(() => {\n      const { id } = route.params;\n      tempID.value = id;\n    });\n    return {\n      PostAmdinRemark,\n      remarkBtnDisabled,\n      remarkText,\n      tempID,\n      remarkOverlay,\n      remarkLoading,\n      userLogOverlay,\n      userLogLoading,\n      adminLogOverlay,\n      adminLogLoading,\n      getUserRemark,\n      getUserAdminLog,\n      getUserLog,\n      ...toRefs(data),\n    };\n  },\n};\n</script>\n","import { render } from \"./UserLog.vue?vue&type=template&id=7e849739\"\nimport script from \"./UserLog.vue?vue&type=script&lang=js\"\nexport * from \"./UserLog.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\n  <div class=\"card shadow-sm rounded-4 overflow-hidden mb-4 position-relative\">\n    <loading :active=\"isLoading\" :is-full-page=\"fullPage\"></loading>\n    <div class=\"card-header bg-white py-3\">\n      <p class=\"mb-0\">\n        <span class=\"material-icons align-bottom\">\n        upcoming\n        </span> 角色管理</p>\n    </div>\n      <div class=\"card-body\">\n        <div class=\"form-check form-switch\" v-for=\"role in roleList\" :key=\"role.id\">\n        <input class=\"form-check-input\" type=\"checkbox\" :id=\"'c_' + role.id\"\n        :value=\"role.id\"\n        v-model=\"userHasRole\">\n        <label class=\"form-check-label\" :for=\"'c_' + role.id\">\n          {{ role.cht_name }}\n        </label>\n      </div>\n      <div class=\"d-flex justify-content-end\">\n        <button class=\"btn btn-sm btn-primary\"\n        @click=\"update('roles', userHasRole)\" :disabled=\"btnDisabled\">更新</button>\n      </div>\n    </div>\n  </div>\n  <div class=\"card shadow-sm rounded-4 overflow-hidden mb-4\">\n    <div class=\"card-header bg-white py-3\">\n      <p class=\"mb-0\">\n        <span class=\"material-icons align-bottom\">\n          voicemail\n        </span> 單一權限 </p>\n    </div>\n    <div class=\"card-body\">\n      <input class=\"form-control form-control-sm\" type=\"text\"\n        placeholder=\"搜尋\">\n        <ul class=\"list-unstyled mt-4 overflow-y-auto\"\n          style=\"max-height: 350px;\">\n          <li v-for=\"(range, index) in rangeList\"\n            :key=\"'range' + index\">\n            <div class=\"form-check\">\n              <input class=\"form-check-input\" type=\"checkbox\"\n              :id=\"range.name\"\n              :checked=\"range.sub_ranges.every(ele => userHasRanges.includes(ele.id))\"\n              @change=\"CheckAllRoles\">\n              <label class=\"form-check-label\" :for=\"range.name\">\n                {{ range.cht_name }}\n              </label>\n            </div>\n            <ul class=\"list-unstyled ms-4\">\n              <li>\n                <div class=\"form-check\"\n                v-for=\"(sub, index) in range.sub_ranges\"\n                :key=\"'sub' + sub.id + index\">\n                  <input class=\"form-check-input\" type=\"checkbox\"\n                  :id=\"'sub' + sub.id\"\n                  :value=\"sub.id\"\n                  v-model=\"userHasRanges\">\n                  <label class=\"form-check-label\" :for=\"'sub' + sub.id\">\n                    {{ sub.cht_name }}\n                  </label>\n                </div>\n              </li>\n            </ul>\n          </li>\n      </ul>\n      <div class=\"d-flex justify-content-end\">\n        <button class=\"btn btn-sm btn-primary\"\n        @click=\"update('ranges', userHasRanges)\" :disabled=\"btnDisabled\">更新</button>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  ref, onMounted, getCurrentInstance, toRefs, reactive,\n} from 'vue';\nimport { useRoute } from 'vue-router';\nimport Loading from 'vue3-loading-overlay';\nimport 'vue3-loading-overlay/dist/vue3-loading-overlay.css';\nimport mixinPostMsg from '@/service/mixinPostMsg';\n\nexport default {\n  name: 'RoleAndPermissions',\n  components: {\n    Loading,\n  },\n  setup() {\n    const route = useRoute();\n    const { proxy } = getCurrentInstance();\n    const { postToasts } = mixinPostMsg(); // 發送訊息\n    const isLoading = ref(false);\n    const fullPage = ref(true);\n    const tempID = ref('');\n    const data = reactive({\n      roleList: [],\n      rangeList: [],\n      userHasRole: [],\n      userHasRanges: [],\n    });\n    function getRoleAndPermissions() {\n      proxy.axios('/v1/permission/roles').then((role) => {\n        data.roleList = role.data.roles;\n        proxy.axios('/v1/permission/ranges').then((range) => {\n          data.rangeList = range.data.ranges;\n        });\n      });\n    }\n    function getUserPermissions(id) {\n      isLoading.value = true;\n      data.userHasRole = [];\n      data.userHasRanges = [];\n      proxy.axios(`/v1/user/${id}/permissions`).then((response) => {\n        response.data.roles.forEach((role) => {\n          data.userHasRole.push(role.role_id);\n        });\n        response.data.ranges.forEach((rangeItem) => {\n          rangeItem.ranges.forEach((sub) => {\n            data.userHasRanges.push(sub.id);\n          });\n        });\n        isLoading.value = false;\n      }).catch((error) => {\n        isLoading.value = false;\n        postToasts('danger', '取得使用者角色和權限失敗', error);\n      });\n    }\n    // checkbox 切換權限\n    function CheckAllRoles(e) {\n      const tempRange = data.rangeList.filter((range) => range.name === e.target.id);\n      if (e.target.checked) {\n        tempRange[0].sub_ranges.forEach((sub) => {\n          if (!data.userHasRanges.some(\n            (range) => range === sub.id,\n          )) {\n            data.userHasRanges = data.userHasRanges.concat([sub.id]);\n          }\n        });\n      } else {\n        tempRange[0].sub_ranges.forEach((sub) => {\n          data.userHasRanges = data.userHasRanges.filter((range) => range !== sub.id);\n        });\n      }\n    }\n    const btnDisabled = ref(false);\n    function update(type, content) {\n      // type: ranges: 權限\n      // type: roles 角色\n      btnDisabled.value = true;\n      const url = `/v1/user/${tempID.value}/permission/${type}`;\n      const updateData = {};\n      updateData[type] = content;\n      proxy.axios\n        .put(url, updateData).then((response) => {\n          if (response.data.message === '成功') {\n            postToasts('success', `編輯 ${type} 成功`, `編輯 ${type} 成功`);\n          } else {\n            postToasts('danger', `編輯 ${type} 失敗`, response.data.message);\n          }\n          btnDisabled.value = false;\n          getUserPermissions(tempID.value);\n        }).catch((error) => {\n          btnDisabled.value = false;\n          postToasts('danger', `編輯 ${type} 失敗`, error);\n        });\n    }\n    onMounted(() => {\n      const { id } = route.params;\n      getRoleAndPermissions();\n      getUserPermissions(id);\n      tempID.value = id;\n    });\n    return {\n      CheckAllRoles,\n      ...toRefs(data),\n      update,\n      isLoading,\n      fullPage,\n      btnDisabled,\n    };\n  },\n};\n</script>\n","import { render } from \"./RoleAndPermissions.vue?vue&type=template&id=83d9f936\"\nimport script from \"./RoleAndPermissions.vue?vue&type=script&lang=js\"\nexport * from \"./RoleAndPermissions.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./UserDetail.vue?vue&type=template&id=3b1c5e0d\"\nimport script from \"./UserDetail.vue?vue&type=script&lang=js\"\nexport * from \"./UserDetail.vue?vue&type=script&lang=js\"\n\nimport \"./UserDetail.vue?vue&type=style&index=0&id=3b1c5e0d&scope=true&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./UserDetail.vue?vue&type=style&index=0&id=3b1c5e0d&scope=true&lang=scss\""],"sourceRoot":""}