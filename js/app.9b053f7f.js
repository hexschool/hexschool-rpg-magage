(function(e){function t(t){for(var n,c,i=t[0],o=t[1],l=t[2],u=0,b=[];u<i.length;u++)c=i[u],Object.prototype.hasOwnProperty.call(s,c)&&s[c]&&b.push(s[c][0]),s[c]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);d&&d(t);while(b.length)b.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,c=1;c<a.length;c++){var i=a[c];0!==s[i]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},c={app:0},s={app:0},r=[];function i(e){return o.p+"js/"+({}[e]||e)+"."+{"chunk-1f339db2":"cffad2e8","chunk-2d0e28d2":"57254578","chunk-2d2299e8":"bf30c7ae"}[e]+".js"}function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.e=function(e){var t=[],a={"chunk-1f339db2":1};c[e]?t.push(c[e]):0!==c[e]&&a[e]&&t.push(c[e]=new Promise((function(t,a){for(var n="css/"+({}[e]||e)+"."+{"chunk-1f339db2":"49f4b604","chunk-2d0e28d2":"31d6cfe0","chunk-2d2299e8":"31d6cfe0"}[e]+".css",s=o.p+n,r=document.getElementsByTagName("link"),i=0;i<r.length;i++){var l=r[i],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===n||u===s))return t()}var b=document.getElementsByTagName("style");for(i=0;i<b.length;i++){l=b[i],u=l.getAttribute("data-href");if(u===n||u===s)return t()}var d=document.createElement("link");d.rel="stylesheet",d.type="text/css",d.onload=t,d.onerror=function(t){var n=t&&t.target&&t.target.src||s,r=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=n,delete c[e],d.parentNode.removeChild(d),a(r)},d.href=s;var O=document.getElementsByTagName("head")[0];O.appendChild(d)})).then((function(){c[e]=0})));var n=s[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,a){n=s[e]=[t,a]}));t.push(n[2]=r);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.src=i(e);var b=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(d);var a=s[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),c=t&&t.target&&t.target.src;b.message="Loading chunk "+e+" failed.\n("+n+": "+c+")",b.name="ChunkLoadError",b.type=n,b.request=c,a[1](b)}s[e]=void 0}};var d=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var b=0;b<l.length;b++)t(l[b]);var d=u;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"1f79":function(e,t,a){"use strict";var n=a("7a23"),c={key:0},s=Object(n["h"])("確定要重新發送驗證信給 "),r=Object(n["h"])(" 這個用戶嗎？"),i=Object(n["h"])("確認要停用 "),o=Object(n["h"])(" 這個用戶嗎？"),l={class:"my-2"};function u(e,t,a,u,b,d){var O=this,j=Object(n["B"])("Modal");return Object(n["u"])(),Object(n["e"])(j,{id:"alertModal",hasFooter:!0,title:"deactivated"==u.ModalType?"停用帳戶":"重發驗證信",classList:"resetPassword"==u.ModalType?"":"bg-danger text-white"},{body:Object(n["N"])((function(){return["resetPassword"==u.ModalType?(Object(n["u"])(),Object(n["e"])("p",c,[s,Object(n["i"])("b",null,Object(n["E"])(u.UserName),1),r])):Object(n["f"])("",!0),"deactivated"==u.ModalType?(Object(n["u"])(),Object(n["e"])(n["a"],{key:1},[Object(n["i"])("p",null,[i,Object(n["i"])("b",null,Object(n["E"])(u.UserName),1),o]),Object(n["i"])("div",l,[Object(n["O"])(Object(n["i"])("input",{type:"text",class:"form-control",id:"deactivated","onUpdate:modelValue":t[1]||(t[1]=function(e){return u.deactivatedName=e}),placeholder:"請輸入使用者暱稱（上面粗體文字）"},null,512),[[n["J"],u.deactivatedName]])])],64)):Object(n["f"])("",!0)]})),footer:Object(n["N"])((function(){return["resetPassword"==u.ModalType?(Object(n["u"])(),Object(n["e"])("button",{key:0,type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=function(e){return O.$emit("comfirm","resetPassword")})},"確認發重設密碼信")):Object(n["f"])("",!0),"deactivated"==u.ModalType?(Object(n["u"])(),Object(n["e"])("button",{key:1,disabled:u.deactivatedName!==u.UserName,type:"button",class:"btn btn-danger",onClick:t[3]||(t[3]=function(e){return O.$emit("comfirm","deactivated")})},"停用帳戶",8,["disabled"])):Object(n["f"])("",!0)]})),_:1},8,["title","classList"])}a("b0c0");var b=a("714b"),d={name:"AlertModal",components:{Modal:b["a"]},props:{name:String,type:String},setup:function(e){var t=Object(n["x"])(""),a=Object(n["c"])((function(){return e.type})),c=Object(n["c"])((function(){return e.name}));return Object(n["s"])((function(){document.getElementById("alertModal").addEventListener("hidden.bs.modal",(function(){t.value=""}))})),{deactivatedName:t,ModalType:a,UserName:c}}};d.render=u;t["a"]=d},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("7a23"),c=a("bc3a"),s=a.n(c),r=a("2106"),i=a.n(r),o=a("7bb1"),l=a("cbdf"),u=a("9457"),b=a("7b17"),d=a("1344");function O(e,t,a,c,s,r){var i=Object(n["B"])("Toasts"),o=Object(n["B"])("router-view");return Object(n["u"])(),Object(n["e"])(n["a"],null,[Object(n["i"])(i),Object(n["i"])(o)],64)}var j={"aria-live":"polite","aria-atomic":"true",class:"position-relative"},p={class:"toast-container end-0 p-3",style:{position:"fixed",top:"15px",right:"15px","min-width":"180px","z-index":"1060"}},m={class:"toast-body"};function f(e,t,a,c,s,r){return Object(n["u"])(),Object(n["e"])("div",j,[Object(n["i"])("div",p,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(s.messages,(function(e){return Object(n["u"])(),Object(n["e"])("div",{key:e.id,class:"toast show",role:"alert","aria-live":"assertive","aria-atomic":"true"},[Object(n["i"])("div",{class:["toast-header",e.toastMsg.statusBg]},[Object(n["i"])("strong",{class:["mr-auto",e.toastMsg.statusColor]},Object(n["E"])(e.toastMsg.title),3)],2),Object(n["i"])("div",m,Object(n["E"])(e.toastMsg.message),1)])})),128))])])}var h=a("5530"),v={name:"Toast",data:function(){return{messages:[],toastMsg:{statusBg:"bg-secondary",statusColor:"text-white",title:"我是標題",message:"我是內文"}}},mounted:function(){var e=this;this.$bus.on("push:message",(function(t){e.messages.push({id:(new Date).getTime(),toastMsg:Object(h["a"])(Object(h["a"])({},e.toastMsg),t)}),setTimeout((function(){e.messages.shift()}),8e3)}))}};v.render=f;var g=v,y={name:"App",components:{Toasts:g}};a("9311");y.render=O;var x=y,w=(a("d3b7"),a("3ca3"),a("ddb0"),a("b0c0"),a("6c02"));a("ac1f"),a("1276");function k(e){for(var t="".concat(e,"="),a=decodeURIComponent(document.cookie),n=a.split(";"),c=0;c<n.length;c+=1){var s=n[c];while(" "===s.charAt(0))s=s.substring(1);if(0===s.indexOf(t))return s.substring(t.length,s.length)}return""}var _={class:"d-flex"},M={class:"header-bar position-sticky top-0 z-1038\n        bg-white w-100 border-bottom d-flex justify-content-between"},C={class:"material-icons align-middle"},E={class:"container-fluid"};function U(e,t,a,c,s,r){var i=Object(n["B"])("SideBar"),o=Object(n["B"])("router-view");return Object(n["u"])(),Object(n["e"])("div",_,[Object(n["i"])(i,{"side-bar-open":c.sidebarOpen,"onUpdate:side-bar-open":t[1]||(t[1]=function(e){return c.sidebarOpen=e})},null,8,["side-bar-open"]),Object(n["i"])("div",{class:["main",{toggled:c.sidebarOpen}]},[Object(n["i"])("div",M,[Object(n["i"])("a",{href:"#",class:"link-secondary d-inline-block p-3 border-end",onClick:t[2]||(t[2]=Object(n["Q"])((function(e){return c.sidebarOpen=!c.sidebarOpen}),["prevent"]))},[Object(n["i"])("span",C,Object(n["E"])(c.sidebarOpen?"last_page":"first_page"),1)])]),Object(n["i"])("div",E,[Object(n["i"])(o)])],2)])}var B=Object(n["i"])("span",{class:"material-icons"}," close ",-1),L=Object(n["i"])("img",{src:"https://rpg.hexschool.com/img/backend/brand/logo-rpg.svg",alt:"",style:{height:"30px"},class:"img-fluid px-3"},null,-1),T={class:"overflow-y-auto mt-3"},N={class:"d-flex justify-content-between px-4"},A={class:"mb-0"},P={class:"material-icons align-bottom me-2"},S=Object(n["i"])("span",{class:"material-icons align-middle"}," keyboard_arrow_down ",-1),z={class:"mb-0"},R={class:"material-icons align-bottom me-2"};function D(e,t,a,c,s,r){var i=Object(n["B"])("router-link");return Object(n["u"])(),Object(n["e"])("div",{class:["sidebar vh-100 position-fixed top-0 py-3 border-end z-1039 bg-white",{toggled:a.sideBarOpen}]},[Object(n["i"])("a",{href:"#",class:"d-md-none d-block",onClick:t[1]||(t[1]=Object(n["Q"])((function(t){return e.$emit("update:sideBarOpen",!1)}),["prevent"]))},[B]),L,Object(n["i"])("div",T,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.sideBarMenu,(function(e){return Object(n["u"])(),Object(n["e"])("div",{key:e.id},[e.hasChild?(Object(n["u"])(),Object(n["e"])("a",{key:0,"data-bs-toggle":"collapse",class:"d-block text-dark text-decoration-none",href:"#"+e.id,role:"button"},[Object(n["i"])("div",N,[Object(n["i"])("p",A,[Object(n["i"])("span",P,Object(n["E"])(e.icon),1),Object(n["h"])(" "+Object(n["E"])(e.title),1)]),S])],8,["href"])):(Object(n["u"])(),Object(n["e"])(i,{key:1,class:"d-block text-dark text-decoration-none px-4",to:e.router},{default:Object(n["N"])((function(){return[Object(n["i"])("p",z,[Object(n["i"])("span",R,Object(n["E"])(e.icon),1),Object(n["h"])(" "+Object(n["E"])(e.title),1)])]})),_:2},1032,["to"])),e.hasChild?(Object(n["u"])(),Object(n["e"])("div",{key:2,class:"collapse",id:e.id},[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.child,(function(e){return Object(n["u"])(),Object(n["e"])(i,{key:e.id,class:"d-block ps-4 text-dark text-decoration-none",to:e.router},{default:Object(n["N"])((function(){return[Object(n["h"])(Object(n["E"])(e.title),1)]})),_:2},1032,["to"])})),128))],8,["id"])):Object(n["f"])("",!0)])})),128))])],2)}a("caad"),a("2532");var F={name:"SideBar",emits:["update:sideBarOpen"],props:{sideBarOpen:Boolean},setup:function(){var e=Object(w["c"])(),t=Object(n["w"])({sideBarMenu:[{id:"user-manager",title:"用戶管理系統",icon:"group",hasChild:!0,child:[{id:"all-user",title:"使用者管理",router:"/admin/users"},{id:"user-do",title:"角色管理",router:"/admin/permission/roles"}]},{id:"assistant",title:"助教系統",icon:"cast_for_education",router:"/admin/assistant/",hasChild:!1}]}),a=Object(n["x"])("");return Object(n["s"])((function(){a.value=new b["a"](document.querySelector("#user-manager"))})),Object(n["s"])((function(){(e.path.includes("users")||e.path.includes("permission"))&&a.value.show()})),Object(h["a"])({},Object(n["G"])(t))}};F.render=D;var I=F,q={name:"Dashboard",components:{SideBar:I},setup:function(){var e=Object(n["x"])(!1);return{sidebarOpen:e}}};q.render=U;var J=q,V={class:"container"},$={class:"row justify-content-center"},H={class:"col-md-6"},G={class:"card shadow-sm rounded-4 overflow-hidden mt-5"},Q=Object(n["i"])("div",{class:"card-header bg-white d-flex justify-content-between align-items-center py-3"},[Object(n["i"])("h5",{class:"mb-0"},"登入系統")],-1),Z={class:"card-body display-12 fw-normal"},K={class:"mb-3"},W=Object(n["i"])("label",{for:"add_mail",class:"form-label"},"Email",-1),X={class:"mb-3"},Y=Object(n["i"])("label",{for:"add_password",class:"form-label"},"密碼",-1),ee=Object(n["i"])("small",{class:"text-muted"},"最短 8 字元，且必須含有英文大小寫與數字混合",-1),te={class:"d-flex justify-content-end"};function ae(e,t,a,c,s,r){return Object(n["u"])(),Object(n["e"])("div",V,[Object(n["i"])("div",$,[Object(n["i"])("div",H,[Object(n["i"])("div",G,[Q,Object(n["i"])("div",Z,[Object(n["i"])("div",K,[W,Object(n["O"])(Object(n["i"])("input",{type:"email",class:"form-control",id:"add_mail","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.account=e})},null,512),[[n["J"],c.account]])]),Object(n["i"])("div",X,[Y,Object(n["O"])(Object(n["i"])("input",{type:"password",class:"form-control",id:"add_password","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.password=e})},null,512),[[n["J"],c.password]]),ee]),Object(n["i"])("div",te,[Object(n["i"])("button",{class:"btn btn-primary",onClick:t[3]||(t[3]=function(){return c.login&&c.login.apply(c,arguments)})},"登入")])])])])])])}var ne={name:"Login",setup:function(){var e=Object(w["d"])(),t=Object(n["k"])(),a=t.proxy,c=Object(n["x"])(""),s=Object(n["x"])("");function r(e){var t={statusBg:"bg-danger",statusColor:" text-white",title:"Login Error",message:e};a.$bus.emit("push:message",t)}function i(){a.axios.post("/v1/user/login",{account:c.value,password:s.value}).then((function(t){if("成功"===t.data.message){window.sessionStorage.setItem("H_temp_mail_store",c.value);var a=(new Date).getTime();e.push("/login/".concat(a))}else r(t.data.message)})).catch((function(e){r(e)}))}return{account:c,password:s,login:i}}};ne.render=ae;var ce=ne;function se(e,t,a,c,s,r){var i=Object(n["B"])("router-view");return Object(n["u"])(),Object(n["e"])("div",null,[Object(n["i"])(i)])}var re={name:"Users"};re.render=se;var ie=re,oe={class:"about px-4 mt-4 position-relative"},le={class:"card shadow-sm rounded-4 overflow-hidden mb-4"},ue={class:"card-header bg-white py-3"},be={class:"row"},de={class:"col-md-6 d-flex align-items-center flex-lg-nowrap flex-wrap"},Oe={class:"input-group"},je={class:"col-md-6 d-flex justify-content-end mt-md-0 mt-3"},pe={class:"card-body p-0"},me={class:"table-responsive"},fe={class:"table table-hover mb-0 text-nowrap",style:{"font-size":"14px"}},he=Object(n["i"])("thead",{class:"bg-light"},[Object(n["i"])("tr",null,[Object(n["i"])("th",{scope:"col",class:"ps-4 py-3 fw-normal border-0"},"姓名"),Object(n["i"])("th",{scope:"col",class:"py-3 fw-normal border-0"},"Email"),Object(n["i"])("th",{scope:"col",class:"py-3 fw-normal border-0"},"驗證狀態"),Object(n["i"])("th",{scope:"col",class:"py-3 fw-normal border-0"},"最近登入日期"),Object(n["i"])("th",{scope:"col",class:"py-3 fw-normal border-0"},"登入方式"),Object(n["i"])("th",{scope:"col",class:"py-3 fw-normal text-end pe-3 border-0"},"編輯")])],-1),ve={class:"text-nowrap"},ge={scope:"row",class:"ps-4"},ye={class:"text-end pe-3"},xe=Object(n["h"])(" 編輯 "),we=Object(n["i"])("span",{class:"material-icons align-middle fs-6"}," edit ",-1),ke=Object(n["i"])("button",{class:"btn btn-sm btn-outline-dark dropdown-toggle",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}," 更多 ",-1),_e={class:"dropdown-menu"},Me={class:"card-footer bg-white py-3"},Ce={"aria-label":"Page navigation example"},Ee={class:"pagination mb-0"},Ue=Object(n["i"])("li",{class:"page-item"},[Object(n["i"])("a",{class:"page-link",href:"#","aria-label":"Previous"},[Object(n["i"])("span",{"aria-hidden":"true"},"«")])],-1),Be=Object(n["i"])("li",{class:"page-item"},[Object(n["i"])("a",{class:"page-link",href:"#","aria-label":"Next"},[Object(n["i"])("span",{"aria-hidden":"true"},"»")])],-1);function Le(e,t,a,c,s,r){var i=Object(n["B"])("loading"),o=Object(n["B"])("router-link"),l=Object(n["B"])("CreateUser"),u=Object(n["B"])("CreateUserByCsv"),b=Object(n["B"])("AlertModal");return Object(n["u"])(),Object(n["e"])("div",oe,[Object(n["i"])(i,{active:c.isLoading,"is-full-page":c.fullPage},null,8,["active","is-full-page"]),Object(n["i"])("div",le,[Object(n["i"])("div",ue,[Object(n["i"])("div",be,[Object(n["i"])("div",de,[Object(n["i"])("div",Oe,[Object(n["O"])(Object(n["i"])("input",{type:"text",class:"form-control",placeholder:"搜尋 Email","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.searchText=e}),onKeyup:t[2]||(t[2]=Object(n["P"])((function(e){return c.getData(1)}),["enter"]))},null,544),[[n["J"],c.searchText]]),Object(n["i"])("button",{class:"btn btn-outline-secondary",type:"button",id:"search",onClick:t[3]||(t[3]=function(e){return c.getData(1)})},"搜尋")])]),Object(n["i"])("div",je,[Object(n["i"])("button",{class:"btn btn-sm btn-outline-dark me-2",onClick:t[4]||(t[4]=function(e){return c.OpenAddUserModal("csv")})},"批次新增用戶"),Object(n["i"])("button",{class:"btn btn-sm btn-primary",onClick:t[5]||(t[5]=function(e){return c.OpenAddUserModal("single")})},"新增用戶")])])]),Object(n["i"])("div",pe,[Object(n["i"])("div",me,[Object(n["i"])("table",fe,[he,Object(n["i"])("tbody",ve,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.userList,(function(e){return Object(n["u"])(),Object(n["e"])("tr",{class:"align-middle",key:e.user_id},[Object(n["i"])("td",ge,Object(n["E"])(e.nickname),1),Object(n["i"])("td",null,Object(n["E"])(e.email),1),Object(n["i"])("td",null,[Object(n["i"])("div",{innerHTML:c.statusCheck(e.state_cht_name)},null,8,["innerHTML"])]),Object(n["i"])("td",null,Object(n["E"])(e.last_login_time?e.last_login_time.split("T")[0]:""),1),Object(n["i"])("td",null,Object(n["E"])(e.login_type),1),Object(n["i"])("td",ye,[Object(n["i"])(o,{to:"/admin/users/"+e.user_id,class:"btn btn-sm btn-outline-dark me-2"},{default:Object(n["N"])((function(){return[xe,we]})),_:2},1032,["to"]),ke,Object(n["i"])("ul",_e,[Object(n["i"])("li",null,[Object(n["i"])("button",{type:"button",class:"dropdown-item",onClick:function(t){return c.OpenAlertModal("resetPassword",e.nickname,e.user_id)}}," 發重設密碼信",8,["onClick"])]),Object(n["i"])("li",null,[Object(n["i"])("button",{class:"dropdown-item",onClick:function(t){return c.OpenAlertModal("deactivated",e.nickname,e.user_id)}},"停用帳戶",8,["onClick"])])])])])})),128))])])])]),Object(n["i"])("div",Me,[Object(n["i"])("nav",Ce,[Object(n["i"])("ul",Ee,[Ue,(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.pagination.total_page,(function(t,a){return Object(n["u"])(),Object(n["e"])("li",{class:["page-item",{active:e.pagination.current_page==t}],key:"user_p"+a},[Object(n["i"])("a",{class:"page-link",href:"#",onClick:Object(n["Q"])((function(e){return c.getData(t)}),["prevent"])},Object(n["E"])(t),9,["onClick"])],2)})),128)),Be])])])]),Object(n["i"])(l,{onCreateUserMethod:c.createUserMethod},null,8,["onCreateUserMethod"]),Object(n["i"])(u,{onCreateUserMethod:c.createUserMethod},null,8,["onCreateUserMethod"]),Object(n["i"])(b,{type:c.alertModalType,name:c.alertModalUserName,onComfirm:c.comfirmAlertModal},null,8,["type","name","onComfirm"])])}a("99af");var Te=a("8a14"),Ne={class:"mb-3"},Ae=Object(n["i"])("label",{for:"add_mail",class:"form-label"},"Email",-1),Pe={class:"mb-3"},Se=Object(n["i"])("label",{for:"add_password",class:"form-label"},"密碼",-1),ze=Object(n["i"])("small",{class:"text-muted"},"最短 8 字元，且必須含有英文大小寫與數字混合",-1);function Re(e,t,a,c,s,r){var i=Object(n["B"])("Modal");return Object(n["u"])(),Object(n["e"])(i,{id:"newUser",hasFooter:!0,title:"新增用戶"},{body:Object(n["N"])((function(){return[Object(n["i"])("div",Ne,[Ae,Object(n["O"])(Object(n["i"])("input",{type:"email",class:"form-control",id:"add_mail","onUpdate:modelValue":t[1]||(t[1]=function(e){return c.account=e}),required:""},null,512),[[n["J"],c.account]])]),Object(n["i"])("div",Pe,[Se,Object(n["O"])(Object(n["i"])("input",{type:"password",class:"form-control",id:"add_password","onUpdate:modelValue":t[2]||(t[2]=function(e){return c.password=e}),required:"",pattern:"^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{8,16}$"},null,512),[[n["J"],c.password]]),ze])]})),footer:Object(n["N"])((function(){return[Object(n["i"])("button",{type:"button",class:"btn btn-primary",onClick:t[3]||(t[3]=function(){return c.registerUser&&c.registerUser.apply(c,arguments)})},"建立")]})),_:1})}var De=a("714b"),Fe={name:"CreareUsers",components:{Modal:De["a"]},emits:["create-user-method"],setup:function(e,t){var a=t.emit,c=Object(n["k"])(),s=c.proxy,r=Object(n["x"])(""),i=Object(n["x"])("");function o(){s.axios.post("/v1/user/register",{account:r.value,password:i.value,nickname:r.value.split("@")[0],roles:[1]}).then((function(e){r.value="",i.value="","成功"===e.data.message?a("createUserMethod",{target:"import",type:"成功"}):a("createUserMethod",{target:"import",type:"失敗",error:e.data.message})})).catch((function(e){r.value="",i.value="",a("createUserMethod",{target:"import",type:"失敗",error:"".concat(e.response.data.statusCode,":").concat(e.response.data.message)})}))}return{registerUser:o,account:r,password:i}}};Fe.render=Re;var Ie=Fe,qe={key:0,class:"mb-3"},Je=Object(n["i"])("label",{for:"add_csv",class:"form-label"},"批次新增用戶 CSV 檔案",-1),Ve={key:1},$e=Object(n["i"])("p",null,"格式範例：",-1),He=Object(n["i"])("div",{class:"p-3 bg-light"},[Object(n["i"])("p",{class:"mb-0 text-muted"},[Object(n["i"])("small",null,"暱稱,Email(帳號),權限")]),Object(n["i"])("p",{class:"mb-0 text-muted"},"test-csv,testcsv1234@hexschool.com,student")],-1),Ge={key:2},Qe=Object(n["i"])("p",{class:"mb-1 h5"},"匯入結果：",-1),Ze={class:"mb-0"},Ke={class:"mb-1"},We={key:0,class:"p-3",style:{"background-color":"rgba(25,135,84,0.1)"}},Xe=Object(n["i"])("p",{class:"mb-1 text-success"},[Object(n["i"])("small",null,"[成功] 成功的使用者列表：")],-1),Ye={class:"mb-0"},et=Object(n["i"])("br",null,null,-1),tt={key:1,class:"p-3 bg-light mt-2"},at=Object(n["i"])("p",{class:"mb-1 text-muted"},[Object(n["i"])("small",null,"[失敗] 失敗的使用者列表：")],-1),nt={class:"mb-0"},ct=Object(n["i"])("br",null,null,-1),st=Object(n["i"])("br",null,null,-1),rt=Object(n["i"])("span",{class:"material-icons align-middle small"}," info ",-1),it={key:2,class:"p-3 bg-light mt-2"},ot=Object(n["i"])("p",{class:"mb-1 text-muted"},[Object(n["i"])("small",null,"[失敗] 已存在的使用者列表：")],-1),lt={class:"mb-0"},ut=Object(n["i"])("br",null,null,-1),bt=Object(n["i"])("br",null,null,-1),dt=Object(n["i"])("span",{class:"material-icons align-middle small"}," info ",-1);function Ot(e,t,a,c,s,r){var i=Object(n["B"])("Modal");return Object(n["u"])(),Object(n["e"])(i,{id:"newUserByCsv",hasFooter:!0,title:"新增用戶"},{body:Object(n["N"])((function(){return[c.showResult?Object(n["f"])("",!0):(Object(n["u"])(),Object(n["e"])("div",qe,[Je,Object(n["i"])("input",{type:"file",class:"form-control",id:"add_csv",onChange:t[1]||(t[1]=function(){return c.onFileChange&&c.onFileChange.apply(c,arguments)})},null,32)])),c.showResult?(Object(n["u"])(),Object(n["e"])("div",Ge,[Qe,Object(n["i"])("p",Ze,[Object(n["i"])("small",null,"共匯入 "+Object(n["E"])(e.results.total_user)+" 位使用者",1)]),Object(n["i"])("p",Ke,[Object(n["i"])("small",null,Object(n["E"])(e.results.success_user_count)+" 位成功｜ "+Object(n["E"])(e.results.total_user-e.results.success_user_count)+" 位失敗 ",1)]),e.results.success_user.length>0?(Object(n["u"])(),Object(n["e"])("div",We,[Xe,(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.results.success_user,(function(e,t){return Object(n["u"])(),Object(n["e"])("div",{class:"mb-0 text-success p-1 border-bottom small",key:"f"+t+e.index},[Object(n["i"])("p",Ye,[Object(n["h"])("暱稱："+Object(n["E"])(e.nickname),1),et,Object(n["h"])(" Email: "+Object(n["E"])(e.email),1)])])})),128))])):Object(n["f"])("",!0),e.results.failed_user.length>0?(Object(n["u"])(),Object(n["e"])("div",tt,[at,(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.results.failed_user,(function(e,t){return Object(n["u"])(),Object(n["e"])("div",{class:"mb-0 text-muted p-1 border-bottom small",key:"f"+t+e.index},[Object(n["i"])("p",nt,[Object(n["h"])("暱稱："+Object(n["E"])(e.nickname),1),ct,Object(n["h"])(" Email: "+Object(n["E"])(e.email)+" ",1),st,rt,Object(n["h"])(" 失敗原因："+Object(n["E"])(e.reason),1)])])})),128))])):Object(n["f"])("",!0),e.results.exist_user.length>0?(Object(n["u"])(),Object(n["e"])("div",it,[ot,(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.results.exist_user,(function(e,t){return Object(n["u"])(),Object(n["e"])("div",{class:"mb-0 text-muted p-1 border-bottom small",key:"f"+t+e.index},[Object(n["i"])("p",lt,[Object(n["h"])("暱稱："+Object(n["E"])(e.nickname),1),ut,Object(n["h"])(" Email: "+Object(n["E"])(e.email)+" ",1),bt,dt,Object(n["h"])(" 失敗原因："+Object(n["E"])(e.reason),1)])])})),128))])):Object(n["f"])("",!0)])):(Object(n["u"])(),Object(n["e"])("div",Ve,[$e,He]))]})),footer:Object(n["N"])((function(){return[c.showResult?(Object(n["u"])(),Object(n["e"])("button",{key:1,type:"button",class:"btn btn-secondary",onClick:t[3]||(t[3]=function(){return c.closeModal&&c.closeModal.apply(c,arguments)})},"關閉")):(Object(n["u"])(),Object(n["e"])("button",{key:0,type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(){return c.registerUsers&&c.registerUsers.apply(c,arguments)})},"建立"))]})),_:1})}var jt={name:"CreareUsers",components:{Modal:De["a"]},emits:["create-user-method"],setup:function(e,t){var a=t.emit,c=Object(n["k"])(),s=c.proxy,r=Object(n["x"])(!1),i=Object(n["w"])({results:{}}),o=new FormData;function l(e){o=new FormData,o.append("list",e.target.files[0])}function u(){s.axios.post("/v1/user/registers",o).then((function(e){r.value=!0,document.getElementById("add_csv").value="",document.querySelector("#newUserByCsv .modal-dismiss").classList.add("d-none"),i.results=e.data,"成功"===e.data.message?a("createUserMethod",{target:"",type:"成功"}):a("createUserMethod",{target:"",type:"失敗",error:e.data.message})})).catch((function(e){a("createUserMethod",{target:"",type:"失敗",error:e})}))}function b(){r.value=!1,document.querySelector("#newUserByCsv .modal-dismiss").classList.remove("d-none"),a("createUserMethod",{target:"csv",type:""})}return Object(h["a"])({registerUsers:u,onFileChange:l,closeModal:b,showResult:r},Object(n["G"])(i))}};jt.render=Ot;var pt=jt,mt=a("1f79"),ft=(a("fe26"),a("c85d")),ht={name:"UserList",components:{CreateUser:Ie,CreateUserByCsv:pt,AlertModal:mt["a"],Loading:Te["a"]},setup:function(){var e=Object(n["k"])(),t=e.proxy,a=Object(n["x"])(!1),c=Object(n["x"])(!1),s=Object(n["x"])(""),r=Object(n["x"])(""),i=Object(n["x"])(""),o=Object(ft["a"])(),l=o.postToasts,u=Object(n["w"])({userList:[],pagination:{}}),d=Object(n["x"])(""),O=Object(n["x"])("email");function j(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;a.value=!0;var n="/v1/user/list?count=10&page=".concat(e);""!==d.value&&(n="/v1/user/list?count=10&page=".concat(e,"&filter=").concat(O.value,"&search_value=").concat(d.value)),t.axios.get(n).then((function(e){u.userList=e.data.user_list,u.pagination=e.data.pagination,a.value=!1})).catch((function(e){a.value=!1,l("danger","取得用戶列表失敗",e)}))}function p(e){return"已驗證帳號"===e?'<span class="material-icons text-primary">check_circle</span>':"未驗證帳號"===e?"":'<span class="material-icons-outlined text-danger">remove_circle</span>'}function m(e){"single"===e?s.value.show():r.value.show()}function f(e){"成功"===e.type?l("success","建立使用者成功","已成功建立使用者"):"失敗"===e.type&&l("danger","建立使用者失敗",e.error),"import"===e.target&&(s.value.hide(),j()),"csv"===e.target&&(r.value.hide(),j())}var v=Object(n["x"])(""),g=Object(n["x"])(""),y=Object(n["x"])(0);function x(e,t,a){i.value.show(),v.value=e,g.value=t,y.value=a}function w(){t.axios.post("/v1/user/".concat(y.value,"/reset_password")).then((function(e){"成功"===e.data.message?(i.value.hide(),l("success","已寄出重設密碼信件","".concat(g.value," 的重設密碼信件已經成功寄出。"))):i.value.hide()})).catch((function(e){i.value.hide(),l("danger","重設密碼信件寄出失敗",e)}))}function k(){t.axios.put("/v1/user/".concat(y.value,"/suspend")).then((function(e){"成功"===e.data.message?(i.value.hide(),l("success","停用帳戶成功","".concat(g.value," 已被停用。"))):(i.value.hide(),l("danger","停用帳戶失敗",e.data.message))})).catch((function(e){i.value.hide(),l("danger","停用帳戶失敗",e)}))}function _(e){"resetPassword"===e?w():"deactivated"===e&&k()}return Object(n["s"])((function(){s.value=new b["b"](document.getElementById("newUser")),r.value=new b["b"](document.getElementById("newUserByCsv")),i.value=new b["b"](document.getElementById("alertModal")),j()})),Object(h["a"])(Object(h["a"])({isLoading:a,fullPage:c,OpenAddUserModal:m,OpenAlertModal:x,alertModalType:v,alertModalUserName:g,alertModalUserID:y},Object(n["G"])(u)),{},{getData:j,comfirmAlertModal:_,searchText:d,searchType:O,createUserMethod:f,statusCheck:p})}};ht.render=Le;var vt=ht;function gt(e,t,a,c,s,r){var i=Object(n["B"])("router-view");return Object(n["u"])(),Object(n["e"])("div",null,[Object(n["i"])(i)])}var yt={name:"Roles"};yt.render=gt;var xt=yt,wt=(a("a4d3"),a("e01a"),{class:"roles p-4 position-relative"}),kt={class:"d-flex justify-content-between align-items-center"},_t=Object(n["i"])("h5",{class:"mb-0"},"角色列表",-1),Mt=Object(n["h"])(" 新增角色 "),Ct={class:"card-body"},Et={class:"d-flex align-items-start justify-content-between"},Ut={class:"text-primary fw-bold mb-1"},Bt={class:"text-muted"},Lt=Object(n["h"])(" 展開細節 "),Tt=Object(n["i"])("span",{class:"material-icons align-middle display-12"}," expand ",-1),Nt={key:0},At=Object(n["h"])("調整"),Pt={class:"p-3"},St={key:0,class:"list-unstyled mb-0"},zt={class:"mb-1 fw-bold"};function Rt(e,t,a,c,s,r){var i=Object(n["B"])("loading"),o=Object(n["B"])("router-link");return Object(n["u"])(),Object(n["e"])("div",wt,[Object(n["i"])(i,{active:c.isLoading,"is-full-page":c.fullPage},null,8,["active","is-full-page"]),Object(n["i"])("div",kt,[_t,Object(n["i"])(o,{to:"/admin/permission/roles/create",class:"btn btn-sm btn-primary"},{default:Object(n["N"])((function(){return[Mt]})),_:1})]),(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.roleList,(function(t){return Object(n["u"])(),Object(n["e"])("div",{class:"card shadow-sm rounded-4 overflow-hidden my-4",key:t.id},[Object(n["i"])("div",Ct,[Object(n["i"])("div",Et,[Object(n["i"])("div",null,[Object(n["i"])("p",Ut," # "+Object(n["E"])(t.cht_name),1),Object(n["i"])("p",Bt,Object(n["E"])(t.description),1),Object(n["i"])("a",{href:"#role"+t.id,class:"d-inline-block btn btn-sm btn-outline-secondary\n              rounded text-decoration-none display-12 fw-bold","data-bs-toggle":"collapse",role:"button"},[Lt,Tt],8,["href"])]),e.roleList&&e.roleList.length>0?(Object(n["u"])(),Object(n["e"])("div",Nt,[Object(n["i"])(o,{to:{name:"EditRole",params:{id:t.id,roleSettings:JSON.stringify(t)}},class:"btn btn-secondary px-5"},{default:Object(n["N"])((function(){return[At]})),_:2},1032,["to"])])):Object(n["f"])("",!0)]),Object(n["i"])("div",{class:"collapse",id:"role"+t.id},[Object(n["i"])("div",Pt,[t.ranges&&t.ranges.length>0&&t.ranges[0]?(Object(n["u"])(),Object(n["e"])("ul",St,[(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(t.ranges,(function(e,t){return Object(n["u"])(),Object(n["e"])("li",{key:"range"+t,class:"mt-2"},[Object(n["i"])("p",zt,Object(n["E"])(e.cht_name),1),(Object(n["u"])(!0),Object(n["e"])(n["a"],null,Object(n["z"])(e.sub_ranges,(function(e,t){return Object(n["u"])(),Object(n["e"])("p",{class:"mb-0",key:"sub"+e.id+t},[Object(n["i"])("small",null,"- "+Object(n["E"])(e.cht_name),1)])})),128))])})),128))])):Object(n["f"])("",!0)])],8,["id"])])])})),128))])}var Dt={name:"RolesList",components:{Loading:Te["a"]},setup:function(){var e=Object(n["k"])(),t=e.proxy,a=Object(n["x"])(!1),c=Object(n["x"])(!0),s=Object(n["w"])({roleList:[]});function r(){a.value=!0,t.axios.get("/v1/permission/roles").then((function(e){s.roleList=e.data.roles,a.value=!1}))}return Object(n["s"])((function(){r()})),Object(h["a"])({fullPage:c,isLoading:a},Object(n["G"])(s))}};Dt.render=Rt;var Ft=Dt,It=[{path:"/login",name:"Login",component:ce},{path:"/login/:timestamp",name:"LoginVertify",component:function(){return a.e("chunk-2d2299e8").then(a.bind(null,"dde7"))}},{path:"/admin",name:"Dashboard",component:J,children:[{path:"users",name:"Users",component:ie,children:[{path:"",name:"UserList",component:vt},{path:":id",name:"AboutID",component:function(){return a.e("chunk-1f339db2").then(a.bind(null,"1728"))}}]},{path:"permission/roles",name:"Roles",component:xt,children:[{path:"",name:"RolesList",component:Ft},{path:"create",name:"CreateRole",component:function(){return a.e("chunk-2d0e28d2").then(a.bind(null,"7ed2"))}},{path:":id",name:"EditRole",component:function(){return a.e("chunk-2d0e28d2").then(a.bind(null,"7ed2"))}}]}]}],qt=Object(w["a"])({history:Object(w["b"])(),routes:It}),Jt=k("h_MqhC49RxFRI6pR3Z_token");qt.beforeEach((function(e,t,a){"Login"===e.name||"LoginVertify"===e.name||Jt?"/"===e.path&&Jt?a("/admin/users"):a():window.location.href="".concat("https://dev-hex-user.hexschool.io/#","/login")}));var Vt=qt;function $t(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=" ",n=t.length,c=0;c<e;c+=1)a+=t.charAt(Math.floor(Math.random()*n));return a}s.a.defaults.baseURL="https://dev-hexsystem.hexschool.io:2053",document.cookie="xsrf-token=".concat($t(32),";"),s.a.defaults.withCredentials=!0,s.a.defaults.xsrfHeaderName="xsrf-token",s.a.defaults.xsrfCookieName="xsrf-token";var Ht=k("h_MqhC49RxFRI6pR3Z_token");s.a.defaults.headers.common.Authorization="Bearer ".concat(Ht);var Gt=Object(n["d"])(x);Gt.config.globalProperties.$bus=Object(d["a"])(),Gt.use(i.a,s.a),Gt.config.globalProperties.axios=s.a,Object(o["a"])({generateMessage:Object(l["a"])({zh_TW:u}),validateOnInput:!0}),Object(l["b"])("zh_TW"),Gt.use(Vt),Gt.mount("#app")},"602a":function(e,t,a){},"714b":function(e,t,a){"use strict";var n=a("7a23"),c={class:"modal-dialog"},s={class:"modal-content"},r={class:"modal-title",id:"exampleModalLabel"},i=Object(n["i"])("span",{class:"material-icons"}," close ",-1),o={class:"modal-body"},l={key:0,class:"modal-footer"};function u(e,t,a,u,b,d){return Object(n["u"])(),Object(n["e"])("div",{class:"modal fade",id:a.id||"exampleModal",tabindex:"-1","aria-labelledby":a.id||"exampleModalLabel","aria-hidden":"true","data-bs-backdrop":"static"},[Object(n["i"])("div",c,[Object(n["i"])("div",s,[Object(n["i"])("div",{class:["modal-header",a.classList]},[Object(n["i"])("h5",r,Object(n["E"])(a.title),1),Object(n["i"])("button",{type:"button",class:["modal-dismiss bg-transparent d-flex align-center border-0",a.classList],"data-bs-dismiss":"modal","aria-label":"Close"},[i],2)],2),Object(n["i"])("div",o,[Object(n["A"])(e.$slots,"body")]),a.hasFooter?(Object(n["u"])(),Object(n["e"])("div",l,[Object(n["A"])(e.$slots,"footer")])):Object(n["f"])("",!0)])])],8,["id","aria-labelledby"])}var b={name:"Modal",props:{id:String,hasFooter:Boolean,title:String,classList:String},setup:function(){return{}}};b.render=u;t["a"]=b},9311:function(e,t,a){"use strict";a("602a")},c85d:function(e,t,a){"use strict";var n=a("7a23");t["a"]=function(){var e=Object(n["k"])(),t=e.proxy,a=function(e,a,n){var c={statusBg:"danger"===e?"bg-danger":"bg-success",statusColor:" text-white",title:a,message:n};t.$bus.emit("push:message",c)};return{postToasts:a}}}});
//# sourceMappingURL=app.9b053f7f.js.map